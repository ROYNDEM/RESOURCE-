<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/app/build.gradle.kts">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/build.gradle.kts" />
              <option name="originalContent" value="plugins {&#10;    alias(libs.plugins.android.application)&#10;    alias(libs.plugins.kotlin.android)&#10;    alias(libs.plugins.kotlin.compose)&#10;    alias(libs.plugins.ksp)&#10;    id(&quot;com.google.gms.google-services&quot;)&#10;}&#10;&#10;android {&#10;    namespace = &quot;com.roy.ngong&quot;&#10;    compileSdk = 35&#10;&#10;    defaultConfig {&#10;        applicationId = &quot;com.roy.ngong&quot;&#10;        minSdk = 24&#10;        targetSdk = 35&#10;        versionCode = 1&#10;        versionName = &quot;1.0&quot;&#10;&#10;        testInstrumentationRunner = &quot;androidx.test.runner.AndroidJUnitRunner&quot;&#10;    }&#10;&#10;    buildTypes {&#10;        release {&#10;            isMinifyEnabled = false&#10;            proguardFiles(&#10;                getDefaultProguardFile(&quot;proguard-android-optimize.txt&quot;),&#10;                &quot;proguard-rules.pro&quot;&#10;            )&#10;        }&#10;    }&#10;    compileOptions {&#10;        sourceCompatibility = JavaVersion.VERSION_11&#10;        targetCompatibility = JavaVersion.VERSION_11&#10;        isCoreLibraryDesugaringEnabled = true&#10;    }&#10;    kotlinOptions {&#10;        jvmTarget = &quot;11&quot;&#10;    }&#10;    buildFeatures {&#10;        compose = true&#10;    }&#10;}&#10;&#10;dependencies {&#10;&#10;    // Compose BOM - manages all Compose artifact versions&#10;    implementation(platform(libs.androidx.compose.bom))&#10;    androidTestImplementation(platform(libs.androidx.compose.bom))&#10;&#10;    // Core &amp; Lifecycle&#10;    implementation(libs.androidx.core.ktx)&#10;    implementation(libs.androidx.lifecycle.runtime.ktx)&#10;    implementation(libs.androidx.activity.compose)&#10;&#10;    // Compose UI - Using aliases from your version catalog (resolved to 1.9.0 via BOM)&#10;    implementation(libs.androidx.ui)&#10;    implementation(libs.androidx.ui.graphics)&#10;    implementation(libs.androidx.ui.tooling.preview)&#10;    implementation(libs.androidx.material3)&#10;    implementation(libs.androidx.compose.foundation)&#10;&#10;    // Navigation&#10;    implementation(libs.androidx.navigation.compose)&#10;&#10;    // Firebase (BOM is the correct approach here)&#10;    implementation(platform(&quot;com.google.firebase:firebase-bom:33.1.2&quot;))&#10;    implementation(&quot;com.google.firebase:firebase-analytics-ktx&quot;)&#10;    implementation(&quot;com.google.firebase:firebase-firestore-ktx&quot;)&#10;    implementation(&quot;com.google.firebase:firebase-auth-ktx&quot;)&#10;    implementation(&quot;com.google.android.gms:play-services-auth:21.3.0&quot;)&#10;&#10;    // Material Icons - align with Compose BOM&#10;    implementation(&quot;androidx.compose.material:material-icons-extended&quot;)&#10;&#10;    // Room Database&#10;    val room_version = &quot;2.6.1&quot;&#10;    implementation(&quot;androidx.room:room-runtime:$room_version&quot;)&#10;    implementation(&quot;androidx.room:room-ktx:$room_version&quot;)&#10;    ksp(&quot;androidx.room:room-compiler:$room_version&quot;)&#10;&#10;    // Other Libraries&#10;    implementation(&quot;com.kizitonwose.calendar:compose:2.7.0&quot;)&#10;    implementation(&quot;com.github.jeziellago:compose-markdown:0.4.0&quot;)&#10;    implementation(libs.gson)&#10;    coreLibraryDesugaring(&quot;com.android.tools:desugar_jdk_libs:2.0.4&quot;)&#10;&#10;    // Testing (Using aliases which resolve via BOM)&#10;    testImplementation(libs.junit)&#10;    androidTestImplementation(libs.androidx.junit)&#10;    androidTestImplementation(libs.androidx.espresso.core)&#10;    androidTestImplementation(libs.androidx.ui.test.junit4)&#10;    debugImplementation(libs.androidx.ui.tooling)&#10;    debugImplementation(libs.androidx.ui.test.manifest)&#10;}" />
              <option name="updatedContent" value="plugins {&#10;    alias(libs.plugins.android.application)&#10;    alias(libs.plugins.kotlin.android)&#10;    alias(libs.plugins.kotlin.compose)&#10;    alias(libs.plugins.ksp)&#10;    id(&quot;com.google.gms.google-services&quot;)&#10;}&#10;&#10;android {&#10;    namespace = &quot;com.roy.ngong&quot;&#10;    compileSdk = 35&#10;&#10;    defaultConfig {&#10;        applicationId = &quot;com.roy.ngong&quot;&#10;        minSdk = 24&#10;        targetSdk = 35&#10;        versionCode = 1&#10;        versionName = &quot;1.0&quot;&#10;&#10;        testInstrumentationRunner = &quot;androidx.test.runner.AndroidJUnitRunner&quot;&#10;    }&#10;&#10;    buildTypes {&#10;        release {&#10;            isMinifyEnabled = false&#10;            proguardFiles(&#10;                getDefaultProguardFile(&quot;proguard-android-optimize.txt&quot;),&#10;                &quot;proguard-rules.pro&quot;&#10;            )&#10;        }&#10;    }&#10;    compileOptions {&#10;        sourceCompatibility = JavaVersion.VERSION_11&#10;        targetCompatibility = JavaVersion.VERSION_11&#10;        isCoreLibraryDesugaringEnabled = true&#10;    }&#10;    kotlinOptions {&#10;        jvmTarget = &quot;11&quot;&#10;    }&#10;    buildFeatures {&#10;        compose = true&#10;    }&#10;}&#10;&#10;dependencies {&#10;&#10;    // Compose BOM - manages all Compose artifact versions&#10;    implementation(platform(libs.androidx.compose.bom))&#10;    androidTestImplementation(platform(libs.androidx.compose.bom))&#10;&#10;    // Core &amp; Lifecycle&#10;    implementation(libs.androidx.core.ktx)&#10;    implementation(libs.androidx.lifecycle.runtime.ktx)&#10;    implementation(libs.androidx.activity.compose)&#10;&#10;    // Compose UI - Using aliases from your version catalog (resolved to 1.9.0 via BOM)&#10;    implementation(libs.androidx.ui)&#10;    implementation(libs.androidx.ui.graphics)&#10;    implementation(libs.androidx.ui.tooling.preview)&#10;    implementation(libs.androidx.material3)&#10;    implementation(libs.androidx.compose.foundation)&#10;&#10;    // Navigation&#10;    implementation(libs.androidx.navigation.compose)&#10;&#10;    // Firebase (BOM is the correct approach here)&#10;    implementation(platform(&quot;com.google.firebase:firebase-bom:33.1.2&quot;))&#10;    implementation(&quot;com.google.firebase:firebase-analytics-ktx&quot;)&#10;    implementation(&quot;com.google.firebase:firebase-firestore-ktx&quot;)&#10;    implementation(&quot;com.google.firebase:firebase-auth-ktx&quot;)&#10;    implementation(&quot;com.google.android.gms:play-services-auth:21.3.0&quot;)&#10;&#10;    // Material Icons - align with Compose BOM&#10;    implementation(&quot;androidx.compose.material:material-icons-extended&quot;)&#10;&#10;    // Room Database&#10;    val room_version = &quot;2.6.1&quot;&#10;    implementation(&quot;androidx.room:room-runtime:$room_version&quot;)&#10;    implementation(&quot;androidx.room:room-ktx:$room_version&quot;)&#10;    ksp(&quot;androidx.room:room-compiler:$room_version&quot;)&#10;&#10;    // Other Libraries&#10;    implementation(&quot;com.kizitonwose.calendar:compose:2.7.0&quot;)&#10;    implementation(&quot;com.github.jeziellago:compose-markdown:0.4.0&quot;)&#10;    implementation(libs.gson)&#10;    coreLibraryDesugaring(&quot;com.android.tools:desugar_jdk_libs:2.0.4&quot;)&#10;&#10;    // Testing (Using aliases which resolve via BOM)&#10;    testImplementation(libs.junit)&#10;    androidTestImplementation(libs.androidx.junit)&#10;    androidTestImplementation(libs.androidx.espresso.core)&#10;    androidTestImplementation(libs.androidx.ui.test.junit4)&#10;    debugImplementation(libs.androidx.ui.tooling)&#10;    debugImplementation(libs.androidx.ui.test.manifest)&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/roy/ngong/MainActivity.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/roy/ngong/MainActivity.kt" />
              <option name="originalContent" value="package com.roy.ngong&#10;&#10;import android.os.Build&#10;import com.roy.ngong.ui.calendar.CalendarScreen&#10;import com.roy.ngong.ui.calendar.AddEditEventScreen&#10;import com.roy.ngong.ui.calendar.CalendarViewModel&#10;import android.os.Bundle&#10;import androidx.activity.ComponentActivity&#10;import androidx.activity.compose.setContent&#10;import androidx.annotation.RequiresApi&#10;import androidx.compose.foundation.layout.padding&#10;import androidx.compose.material3.Scaffold&#10;import androidx.compose.material3.SnackbarHost&#10;import androidx.compose.material3.SnackbarHostState&#10;import androidx.compose.runtime.Composable&#10;import androidx.compose.runtime.getValue&#10;import androidx.compose.runtime.mutableStateOf&#10;import androidx.compose.runtime.remember&#10;import androidx.compose.runtime.setValue&#10;import androidx.compose.ui.Modifier&#10;import androidx.lifecycle.viewmodel.compose.viewModel&#10;import androidx.navigation.NavGraphBuilder&#10;import androidx.navigation.NavHostController&#10;import androidx.navigation.NavType&#10;import androidx.navigation.compose.NavHost&#10;import androidx.navigation.compose.composable&#10;import androidx.navigation.compose.rememberNavController&#10;import androidx.navigation.navArgument&#10;import androidx.navigation.navigation&#10;import com.roy.ngong.navigation.AppDestinations&#10;import com.roy.ngong.ui.SplashScreen&#10;import com.roy.ngong.ui.admin.AdminDashboardScreen&#10;import com.roy.ngong.ui.admin.AdminManageControlsScreen&#10;import com.roy.ngong.ui.admin.AdminReportDetailScreen&#10;import com.roy.ngong.ui.admin.AdminReportsListScreen&#10;// import com.roy.ngong.ui.admin.AdminSignUpScreen // &lt;-- REMOVED&#10;import com.roy.ngong.ui.admin.AppDataViewModel&#10;import com.roy.ngong.ui.admin.AuthViewModel&#10;import com.roy.ngong.ui.auth.LoginScreen // Keep the main login screen&#10;import com.roy.ngong.ui.auth.SignUpScreen&#10;import com.roy.ngong.ui.edit.ResourceEditScreen&#10;import com.roy.ngong.ui.home.HomeScreen&#10;import com.roy.ngong.ui.pending.PendingSubmissionsViewModel&#10;import com.roy.ngong.ui.resource.ResourceEntryScreen&#10;import com.roy.ngong.ui.resource.viewmodel.ResourceViewModel&#10;import com.roy.ngong.ui.theme.NGONGTheme&#10;&#10;class MainActivity : ComponentActivity() {&#10;    @RequiresApi(Build.VERSION_CODES.O)&#10;    override fun onCreate(savedInstanceState: Bundle?) {&#10;        super.onCreate(savedInstanceState)&#10;        setContent {&#10;            var isDarkMode by remember { mutableStateOf(false) }&#10;            val onThemeToggle = { isDarkMode = !isDarkMode }&#10;            val snackbarHostState = remember { SnackbarHostState() }&#10;&#10;            NGONGTheme(darkTheme = isDarkMode) {&#10;                Scaffold(&#10;                    snackbarHost = { SnackbarHost(hostState = snackbarHostState) }&#10;                ) { innerPadding -&gt;&#10;                    AppNavigator(&#10;                        modifier = Modifier.padding(innerPadding),&#10;                        isDarkMode = isDarkMode,&#10;                        onThemeToggle = onThemeToggle,&#10;                        snackbarHostState = snackbarHostState&#10;                    )&#10;                }&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;&#10;@RequiresApi(Build.VERSION_CODES.O)&#10;@Composable&#10;fun AppNavigator(&#10;    modifier: Modifier = Modifier,&#10;    isDarkMode: Boolean,&#10;    onThemeToggle: () -&gt; Unit,&#10;    snackbarHostState: SnackbarHostState&#10;) {&#10;    val navController = rememberNavController()&#10;&#10;    // --- VIEW MODELS ---&#10;    val resourceViewModel: ResourceViewModel = viewModel()&#10;    val appDataViewModel: AppDataViewModel = viewModel()&#10;    val authViewModel: AuthViewModel = viewModel()&#10;    val pendingViewModel: PendingSubmissionsViewModel = viewModel()&#10;    val calendarViewModel: CalendarViewModel = viewModel()&#10;&#10;    NavHost(&#10;        navController = navController,&#10;        startDestination = AppDestinations.SPLASH_ROUTE,&#10;        modifier = modifier&#10;    ) {&#10;        composable(AppDestinations.SIGN_UP_ROUTE) {&#10;            SignUpScreen(navController = navController)&#10;        }&#10;&#10;        composable(AppDestinations.SPLASH_ROUTE) {&#10;            SplashScreen(navController = navController)&#10;        }&#10;&#10;        composable(AppDestinations.LOGIN_ROUTE) {&#10;            LoginScreen(navController = navController)&#10;        }&#10;&#10;        composable(AppDestinations.HOME_SCREEN_ROUTE) {&#10;            HomeScreen(&#10;                navController = navController,&#10;                appDataViewModel = appDataViewModel,&#10;                onLogout = {&#10;                    authViewModel.logout()&#10;                    navController.navigate(AppDestinations.LOGIN_ROUTE) {&#10;                        popUpTo(0)&#10;                    }&#10;                },&#10;                onProfileClick = { navController.navigate(AppDestinations.PROFILE_ROUTE) },&#10;                onNavigateToPending = { navController.navigate(AppDestinations.RESOURCE_EDIT_ROUTE) },&#10;                onNavigateToEntry = { navController.navigate(AppDestinations.RESOURCE_ENTRY_ROUTE) },&#10;                isDarkMode = isDarkMode,&#10;                onThemeToggle = onThemeToggle&#10;            )&#10;        }&#10;&#10;        composable(AppDestinations.PROFILE_ROUTE) {&#10;            // You will need to create this ProfileScreen composable&#10;            ProfileScreen(navController = navController)&#10;        }&#10;&#10;        composable(AppDestinations.RESOURCE_ENTRY_ROUTE) {&#10;            ResourceEntryScreen(&#10;                pendingViewModel = pendingViewModel,&#10;                snackbarHostState = snackbarHostState,&#10;                onNavigateBack = { navController.popBackStack() }&#10;            )&#10;        }&#10;&#10;        composable(route = AppDestinations.RESOURCE_EDIT_ROUTE) {&#10;            ResourceEditScreen(&#10;                pendingViewModel = pendingViewModel,&#10;                resourceViewModel = resourceViewModel,&#10;                snackbarHostState = snackbarHostState,&#10;                onNavigateBack = { navController.popBackStack() }&#10;            )&#10;        }&#10;        composable(AppDestinations.CALENDAR_ROUTE) {&#10;            CalendarScreen(&#10;                navController = navController,&#10;                calendarViewModel = calendarViewModel,&#10;            )&#10;        }&#10;        &#10;        composable(route = AppDestinations.ADMIN_ADD_ENTRY_ROUTE) {&#10;            // Use the correct, existing screen and ViewModel&#10;            AddEditEventScreen(&#10;                navController = navController,&#10;                // Pass &quot;new_event&quot; to indicate a new event is being created from the admin dashboard&#10;                dateString = &quot;new_event&quot;,&#10;                calendarViewModel = calendarViewModel // Use the existing ViewModel instance&#10;            )&#10;        }&#10;&#10;        composable(&#10;            route = AppDestinations.ADD_EDIT_EVENT_ROUTE,&#10;            arguments = listOf(navArgument(&quot;dateString&quot;) { type = NavType.StringType })&#10;        ) { backStackEntry -&gt;&#10;            val date = backStackEntry.arguments?.getString(&quot;dateString&quot;)&#10;            if (date != null) {&#10;                AddEditEventScreen(&#10;                    navController = navController,&#10;                    dateString = date,&#10;                    calendarViewModel = calendarViewModel // Pass the ViewModel&#10;                )&#10;            } else {&#10;                navController.popBackStack() // Go back if date is missing&#10;            }&#10;        }&#10;&#10;        // --- Admin Navigation Graph ---&#10;        adminNavGraph(&#10;            navController = navController,&#10;            // startDestination is no longer passed from here&#10;            resourceViewModel = resourceViewModel,&#10;            appDataViewModel = appDataViewModel,&#10;            authViewModel = authViewModel,&#10;            isDarkMode = isDarkMode,&#10;            onThemeToggle = onThemeToggle&#10;        )&#10;    }&#10;}&#10;&#10;fun NavGraphBuilder.adminNavGraph(&#10;    navController: NavHostController,&#10;    // The startDestination is now fixed and doesn't need to be a parameter&#10;    // startDestination: String,&#10;    resourceViewModel: ResourceViewModel,&#10;    appDataViewModel: AppDataViewModel,&#10;    authViewModel: AuthViewModel,&#10;    isDarkMode: Boolean,&#10;    onThemeToggle: () -&gt; Unit&#10;) {&#10;    // The start destination for the admin flow is now ALWAYS the dashboard.&#10;    navigation(startDestination = AppDestinations.ADMIN_DASHBOARD_ROUTE, route = &quot;admin_flow&quot;) {&#10;&#10;        // --- DELETED ADMIN_LOGIN_ROUTE COMPOSABLE ---&#10;&#10;        // --- DELETED ADMIN_SIGN_UP_ROUTE COMPOSABLE ---&#10;&#10;        composable(AppDestinations.ADMIN_DASHBOARD_ROUTE) {&#10;            AdminDashboardScreen(&#10;                navController = navController,&#10;                authViewModel = authViewModel,&#10;                onLogout = {&#10;                    authViewModel.logout()&#10;                    // Navigate back to the single login screen&#10;                    navController.navigate(AppDestinations.LOGIN_ROUTE) {&#10;                        popUpTo(0) // Clear the entire back stack&#10;                    }&#10;                },&#10;                isDarkMode = isDarkMode,&#10;                onThemeToggle = onThemeToggle,&#10;                onProfileClick = { /* Can be implemented later */ }&#10;            )&#10;        }&#10;        composable(AppDestinations.ADMIN_MANAGE_CONTROLS_ROUTE) {&#10;            AdminManageControlsScreen(&#10;                appDataViewModel = appDataViewModel,&#10;                onNavigateBack = { navController.popBackStack() }&#10;            )&#10;        }&#10;&#10;        composable(AppDestinations.ADMIN_REPORTS_LIST_ROUTE) {&#10;            AdminReportsListScreen(&#10;                navController = navController,&#10;                resourceViewModel = resourceViewModel,&#10;                onNavigateBack = { navController.popBackStack() }&#10;            )&#10;        }&#10;        composable(&#10;            route = AppDestinations.ADMIN_REPORTS_DETAIL_ROUTE,&#10;            arguments = listOf(navArgument(&quot;date&quot;) { type = NavType.StringType })&#10;        ) { backStackEntry -&gt;&#10;            val date = backStackEntry.arguments?.getString(&quot;date&quot;)&#10;            if (date != null) {&#10;                AdminReportDetailScreen(&#10;                    resourceViewModel = resourceViewModel,&#10;                    date = date,&#10;                    onNavigateBack = { navController.popBackStack() }&#10;                )&#10;            } else {&#10;                navController.popBackStack()&#10;            }&#10;        }&#10;    }&#10;}" />
              <option name="updatedContent" value="package com.roy.ngong&#10;&#10;import android.os.Build&#10;import com.roy.ngong.ui.calendar.CalendarScreen&#10;import com.roy.ngong.ui.calendar.AddEditEventScreen&#10;import com.roy.ngong.ui.calendar.CalendarViewModel&#10;import android.os.Bundle&#10;import androidx.activity.ComponentActivity&#10;import androidx.activity.compose.setContent&#10;import androidx.annotation.RequiresApi&#10;import androidx.compose.foundation.layout.padding&#10;import androidx.compose.material3.Scaffold&#10;import androidx.compose.material3.SnackbarHost&#10;import androidx.compose.material3.SnackbarHostState&#10;import androidx.compose.runtime.Composable&#10;import androidx.compose.runtime.getValue&#10;import androidx.compose.runtime.mutableStateOf&#10;import androidx.compose.runtime.remember&#10;import androidx.compose.runtime.setValue&#10;import androidx.compose.ui.Modifier&#10;import androidx.lifecycle.viewmodel.compose.viewModel&#10;import androidx.navigation.NavGraphBuilder&#10;import androidx.navigation.NavHostController&#10;import androidx.navigation.NavType&#10;import androidx.navigation.compose.NavHost&#10;import androidx.navigation.compose.composable&#10;import androidx.navigation.compose.rememberNavController&#10;import androidx.navigation.navArgument&#10;import androidx.navigation.navigation&#10;import com.roy.ngong.navigation.AppDestinations&#10;import com.roy.ngong.ui.SplashScreen&#10;import com.roy.ngong.ui.admin.AdminDashboardScreen&#10;import com.roy.ngong.ui.admin.AdminManageControlsScreen&#10;import com.roy.ngong.ui.admin.AdminReportDetailScreen&#10;import com.roy.ngong.ui.admin.AdminReportsListScreen&#10;// import com.roy.ngong.ui.admin.AdminSignUpScreen // &lt;-- REMOVED&#10;import com.roy.ngong.ui.admin.AppDataViewModel&#10;import com.roy.ngong.ui.admin.AuthViewModel&#10;import com.roy.ngong.ui.auth.LoginScreen // Keep the main login screen&#10;import com.roy.ngong.ui.auth.SignUpScreen&#10;import com.roy.ngong.ui.edit.ResourceEditScreen&#10;import com.roy.ngong.ui.home.HomeScreen&#10;import com.roy.ngong.ui.pending.PendingSubmissionsViewModel&#10;import com.roy.ngong.ui.resource.ResourceEntryScreen&#10;import com.roy.ngong.ui.resource.viewmodel.ResourceViewModel&#10;import com.roy.ngong.ui.theme.NGONGTheme&#10;&#10;class MainActivity : ComponentActivity() {&#10;    @RequiresApi(Build.VERSION_CODES.O)&#10;    override fun onCreate(savedInstanceState: Bundle?) {&#10;        super.onCreate(savedInstanceState)&#10;        setContent {&#10;            var isDarkMode by remember { mutableStateOf(false) }&#10;            val onThemeToggle = { isDarkMode = !isDarkMode }&#10;            val snackbarHostState = remember { SnackbarHostState() }&#10;&#10;            NGONGTheme(darkTheme = isDarkMode) {&#10;                Scaffold(&#10;                    snackbarHost = { SnackbarHost(hostState = snackbarHostState) }&#10;                ) { innerPadding -&gt;&#10;                    AppNavigator(&#10;                        modifier = Modifier.padding(innerPadding),&#10;                        isDarkMode = isDarkMode,&#10;                        onThemeToggle = onThemeToggle,&#10;                        snackbarHostState = snackbarHostState&#10;                    )&#10;                }&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;&#10;@RequiresApi(Build.VERSION_CODES.O)&#10;@Composable&#10;fun AppNavigator(&#10;    modifier: Modifier = Modifier,&#10;    isDarkMode: Boolean,&#10;    onThemeToggle: () -&gt; Unit,&#10;    snackbarHostState: SnackbarHostState&#10;) {&#10;    val navController = rememberNavController()&#10;&#10;    // --- VIEW MODELS ---&#10;    val resourceViewModel: ResourceViewModel = viewModel()&#10;    val appDataViewModel: AppDataViewModel = viewModel()&#10;    val authViewModel: AuthViewModel = viewModel()&#10;    val pendingViewModel: PendingSubmissionsViewModel = viewModel()&#10;    val calendarViewModel: CalendarViewModel = viewModel()&#10;&#10;    NavHost(&#10;        navController = navController,&#10;        startDestination = AppDestinations.SPLASH_ROUTE,&#10;        modifier = modifier&#10;    ) {&#10;        composable(AppDestinations.SIGN_UP_ROUTE) {&#10;            SignUpScreen(navController = navController)&#10;        }&#10;&#10;        composable(AppDestinations.SPLASH_ROUTE) {&#10;            SplashScreen(navController = navController)&#10;        }&#10;&#10;        composable(AppDestinations.LOGIN_ROUTE) {&#10;            LoginScreen(navController = navController)&#10;        }&#10;&#10;        composable(AppDestinations.HOME_SCREEN_ROUTE) {&#10;            HomeScreen(&#10;                navController = navController,&#10;                appDataViewModel = appDataViewModel,&#10;                onLogout = {&#10;                    authViewModel.logout()&#10;                    navController.navigate(AppDestinations.LOGIN_ROUTE) {&#10;                        popUpTo(0)&#10;                    }&#10;                },&#10;                onProfileClick = { navController.navigate(AppDestinations.PROFILE_ROUTE) },&#10;                onNavigateToPending = { navController.navigate(AppDestinations.RESOURCE_EDIT_ROUTE) },&#10;                onNavigateToEntry = { navController.navigate(AppDestinations.RESOURCE_ENTRY_ROUTE) },&#10;                isDarkMode = isDarkMode,&#10;                onThemeToggle = onThemeToggle&#10;            )&#10;        }&#10;&#10;        composable(AppDestinations.PROFILE_ROUTE) {&#10;            // You will need to create this ProfileScreen composable&#10;            ProfileScreen(navController = navController)&#10;        }&#10;&#10;        composable(AppDestinations.RESOURCE_ENTRY_ROUTE) {&#10;            ResourceEntryScreen(&#10;                pendingViewModel = pendingViewModel,&#10;                snackbarHostState = snackbarHostState,&#10;                onNavigateBack = { navController.popBackStack() }&#10;            )&#10;        }&#10;&#10;        composable(route = AppDestinations.RESOURCE_EDIT_ROUTE) {&#10;            ResourceEditScreen(&#10;                pendingViewModel = pendingViewModel,&#10;                resourceViewModel = resourceViewModel,&#10;                snackbarHostState = snackbarHostState,&#10;                onNavigateBack = { navController.popBackStack() }&#10;            )&#10;        }&#10;        composable(AppDestinations.CALENDAR_ROUTE) {&#10;            CalendarScreen(&#10;                navController = navController,&#10;                calendarViewModel = calendarViewModel,&#10;            )&#10;        }&#10;        &#10;        composable(route = AppDestinations.ADMIN_ADD_ENTRY_ROUTE) {&#10;            // Use the correct, existing screen and ViewModel&#10;            AddEditEventScreen(&#10;                navController = navController,&#10;                // Pass &quot;new_event&quot; to indicate a new event is being created from the admin dashboard&#10;                dateString = &quot;new_event&quot;,&#10;                calendarViewModel = calendarViewModel // Use the existing ViewModel instance&#10;            )&#10;        }&#10;&#10;        composable(&#10;            route = AppDestinations.ADD_EDIT_EVENT_ROUTE,&#10;            arguments = listOf(navArgument(&quot;dateString&quot;) { type = NavType.StringType })&#10;        ) { backStackEntry -&gt;&#10;            val date = backStackEntry.arguments?.getString(&quot;dateString&quot;)&#10;            if (date != null) {&#10;                AddEditEventScreen(&#10;                    navController = navController,&#10;                    dateString = date,&#10;                    calendarViewModel = calendarViewModel // Pass the ViewModel&#10;                )&#10;            } else {&#10;                navController.popBackStack() // Go back if date is missing&#10;            }&#10;        }&#10;&#10;        // --- Admin Navigation Graph ---&#10;        adminNavGraph(&#10;            navController = navController,&#10;            // startDestination is no longer passed from here&#10;            resourceViewModel = resourceViewModel,&#10;            appDataViewModel = appDataViewModel,&#10;            authViewModel = authViewModel,&#10;            isDarkMode = isDarkMode,&#10;            onThemeToggle = onThemeToggle&#10;        )&#10;    }&#10;}&#10;&#10;fun NavGraphBuilder.adminNavGraph(&#10;    navController: NavHostController,&#10;    // The startDestination is now fixed and doesn't need to be a parameter&#10;    // startDestination: String,&#10;    resourceViewModel: ResourceViewModel,&#10;    appDataViewModel: AppDataViewModel,&#10;    authViewModel: AuthViewModel,&#10;    isDarkMode: Boolean,&#10;    onThemeToggle: () -&gt; Unit&#10;) {&#10;    // The start destination for the admin flow is now ALWAYS the dashboard.&#10;    navigation(startDestination = AppDestinations.ADMIN_DASHBOARD_ROUTE, route = &quot;admin_flow&quot;) {&#10;&#10;        // --- DELETED ADMIN_LOGIN_ROUTE COMPOSABLE ---&#10;&#10;        // --- DELETED ADMIN_SIGN_UP_ROUTE COMPOSABLE ---&#10;&#10;        composable(AppDestinations.ADMIN_DASHBOARD_ROUTE) {&#10;            AdminDashboardScreen(&#10;                navController = navController,&#10;                authViewModel = authViewModel,&#10;                onLogout = {&#10;                    authViewModel.logout()&#10;                    // Navigate back to the single login screen&#10;                    navController.navigate(AppDestinations.LOGIN_ROUTE) {&#10;                        popUpTo(0) // Clear the entire back stack&#10;                    }&#10;                },&#10;                isDarkMode = isDarkMode,&#10;                onThemeToggle = onThemeToggle,&#10;                onProfileClick = { /* Can be implemented later */ }&#10;            )&#10;        }&#10;        composable(AppDestinations.ADMIN_MANAGE_CONTROLS_ROUTE) {&#10;            AdminManageControlsScreen(&#10;                appDataViewModel = appDataViewModel,&#10;                onNavigateBack = { navController.popBackStack() }&#10;            )&#10;        }&#10;&#10;        composable(AppDestinations.ADMIN_REPORTS_LIST_ROUTE) {&#10;            AdminReportsListScreen(&#10;                navController = navController,&#10;                resourceViewModel = resourceViewModel,&#10;                onNavigateBack = { navController.popBackStack() }&#10;            )&#10;        }&#10;        composable(&#10;            route = AppDestinations.ADMIN_REPORTS_DETAIL_ROUTE,&#10;            arguments = listOf(navArgument(&quot;date&quot;) { type = NavType.StringType })&#10;        ) { backStackEntry -&gt;&#10;            val date = backStackEntry.arguments?.getString(&quot;date&quot;)&#10;            if (date != null) {&#10;                AdminReportDetailScreen(&#10;                    resourceViewModel = resourceViewModel,&#10;                    date = date,&#10;                    onNavigateBack = { navController.popBackStack() }&#10;                )&#10;            } else {&#10;                navController.popBackStack()&#10;            }&#10;        }&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>